{
  "collections": [
    {
      "name": "post_weibo",
      "options": {
        "validator": {
          "$jsonSchema": {
            "bsonType": "object",
            "required": [
              "platform",
              "post_id",
              "content",
              "url"
            ],
            "properties": {
              "_id": {
                "bsonType": "objectId",
                "description": "MongoDB 自动生成的唯一标识符"
              },
              "platform": {
                "bsonType": "string",
                "description": "平台名称，例如：微博、微信公众号、小红书等"
              },
              "post_id": {
                "bsonType": "string",
                "description": "唯一标识每篇稿件的ID"
              },
              "third_party_post_id": {
                "bsonType": "string",
                "description": "第三方平台提供的文章唯一标识符"
              },
              "scheme_id": {
                "bsonType": "long",
                "description": "监测方案ID"
              },
              "url": {
                "bsonType": "string",
                "description": "文章链接"
              },
              "title": {
                "bsonType": "string",
                "description": "标题（如果适用）"
              },
              "content": {
                "bsonType": "string",
                "description": "文章正文内容"
              },
              "author": {
                "bsonType": "object",
                "required": [
                  "user_id",
                  "username"
                ],
                "properties": {
                  "user_id": {
                    "bsonType": "string"
                  },
                  "username": {
                    "bsonType": "string"
                  }
                }
              },
              "publish_time": {
                "bsonType": "date",
                "description": "发布时间"
              },
              "ip_location": {
                "bsonType": "string",
                "description": "用户发布评论时的IP定位"
              },
              "last_modified": {
                "bsonType": "date",
                "description": "最后修改时间（如果适用）"
              },
              "content_hash": {
                "bsonType": "string",
                "description": "文章内容的哈希值，用于检测更新"
              },
              "fetch_time": {
                "bsonType": "date",
                "description": "抓取时间"
              },
              "status": {
                "enum": [
                  "active",
                  "deleted",
                  "updated"
                ],
                "description": "状态：active, deleted, updated 等"
              },
              "tags": {
                "bsonType": "array",
                "items": {
                  "bsonType": "string"
                },
                "description": "关键词标签列表"
              },
              "sentiment_score": {
                "bsonType": "double",
                "description": "情感分析得分（可选）"
              },
              "engagement_metrics": {
                "bsonType": "object",
                "properties": {
                  "likes": {
                    "bsonType": "int"
                  },
                  "comments": {
                    "bsonType": "int"
                  },
                  "shares": {
                    "bsonType": "int"
                  }
                }
              },
              "current_hot_score": {
                "bsonType": "double",
                "description": "当前的热度得分"
              },
              "is_currently_hot": {
                "bsonType": "bool",
                "description": "当前是否为热点文章"
              }
            }
          }
        }
      },
      "indexes": [
        {
          "key": {
            "post_id": 1
          },
          "options": {
            "unique": true,
            "name": "unique_post_id_index"
          }
        }
      ]
    },
    {
      "name": "post_comment_weibo",
      "options": {
        "validator": {
          "$jsonSchema": {
            "bsonType": "object",
            "required": [
              "_id",
              "post_id",
              "comment_id",
              "content"
            ],
            "properties": {
              "_id": {
                "bsonType": "objectId"
              },
              "post_id": {
                "bsonType": "string"
              },
              "third_party_comment_id": {
                "bsonType": "string"
              },
              "comment_id": {
                "bsonType": "string"
              },
              "parent_comment_id": {
                "bsonType": "string"
              },
              "content": {
                "bsonType": "string"
              },
              "author": {
                "bsonType": "object",
                "required": [
                  "user_id",
                  "username"
                ],
                "properties": {
                  "user_id": {
                    "bsonType": "string"
                  },
                  "username": {
                    "bsonType": "string"
                  }
                }
              },
              "timestamp": {
                "bsonType": "date"
              },
              "sentiment_score": {
                "bsonType": "double"
              },
              "sentiment_label": {
                "enum": [
                  "positive",
                  "negative",
                  "neutral"
                ]
              },
              "reply_count": {
                "bsonType": "int"
              },
              "likes": {
                "bsonType": "int"
              },
              "ip_location": {
                "bsonType": "string"
              },
              "fetch_time": {
                "bsonType": "date"
              }
            }
          }
        }
      },
      "indexes": [
        {
          "key": {
            "comment_id": 1
          },
          "options": {
            "unique": true,
            "name": "unique_comment_id_index"
          }
        }
      ]
    }
  ]
}